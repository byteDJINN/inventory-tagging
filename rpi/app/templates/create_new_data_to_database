<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit to PocketBase</title>
    <script src="https://cdn.jsdelivr.net/gh/pocketbase/js-sdk@master/dist/pocketbase.umd.js"></script>
</head>
<body>
    <h1>Insert New Data</h1>
    <form id="dataForm" onsubmit="senddata(event)"> <!-- Attach event to prevent form from submitting -->
        <label for="name">tagid:</label>
        <input id="product-id" name="tagid" required><br><br>

        <label for="email">Name:</label>
        <input id="email" name="Name" required><br><br>

        <label for="email">Size:</label>
        <input id="email" name="Size" required><br><br>

        <label for="email">colour:</label>
        <input id="email" name="colour" required><br><br>

        <label for="email">price:</label>
        <input id="email" name="price" required><br><br>

        <button  type="submit">Submit</button>
    </form>

    <script>
        async function senddata(event){
            event.preventDefault(); // Prevent form from reloading the page

            const pocketbaseUrl = 'https://inventory.bytedjinn.com/db'; // Replace with your PocketBase URL
            const pb = new PocketBase(pocketbaseUrl);  // Ensure the correct object is used
            
            // Collect data from form inputs
            const tagid = document.getElementById('product-id').value;
            const name = document.getElementById('product-title').value;
            const size = document.getElementById('product-size').value;
            const colour = document.getElementById('product-colour').value;
            const price = document.getElementById('price').value;

            const data = {
                "tagID": tagid, // Assuming a static value for now
                "name": name,
                "size": size,   // Add actual value
                "colour": colour, // Add actual value
                "price": price,     // Adjust as needed
                "timeSold": "" // Adjust as needed
            };

            try {
                // Insert data into PocketBase
                const record = await pb.collection('items').create(data);
                alert('Data inserted successfully!');
            } catch (error) {
                console.error('Error inserting data:', error);
                alert('Failed to insert data.');
            }
        }
    </script>
</body>
</html>